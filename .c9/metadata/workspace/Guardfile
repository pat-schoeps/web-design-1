{"filter":false,"title":"Guardfile","tooltip":"/Guardfile","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":62,"column":0}},"nl":"\n","lines":["# A sample Guardfile","# More info at https://github.com/guard/guard#readme","","guard :minitest do","  # with Minitest::Unit","  watch(%r{^test/(.*)\\/?test_(.*)\\.rb$})","  watch(%r{^lib/(.*/)?([^/]+)\\.rb$})     { |m| \"test/#{m[1]}test_#{m[2]}.rb\" }","  watch(%r{^test/test_helper\\.rb$})      { 'test' }","","  # with Minitest::Spec","  # watch(%r{^spec/(.*)_spec\\.rb$})","  # watch(%r{^lib/(.+)\\.rb$})         { |m| \"spec/#{m[1]}_spec.rb\" }","  # watch(%r{^spec/spec_helper\\.rb$}) { 'spec' }","","  # Rails 4","  # watch(%r{^app/(.+)\\.rb$})                               { |m| \"test/#{m[1]}_test.rb\" }","  # watch(%r{^app/controllers/application_controller\\.rb$}) { 'test/controllers' }","  # watch(%r{^app/controllers/(.+)_controller\\.rb$})        { |m| \"test/integration/#{m[1]}_test.rb\" }","  # watch(%r{^app/views/(.+)_mailer/.+})                   { |m| \"test/mailers/#{m[1]}_mailer_test.rb\" }","  # watch(%r{^lib/(.+)\\.rb$})                               { |m| \"test/lib/#{m[1]}_test.rb\" }","  # watch(%r{^test/.+_test\\.rb$})","  # watch(%r{^test/test_helper\\.rb$}) { 'test' }","","  # Rails < 4","  # watch(%r{^app/controllers/(.*)\\.rb$}) { |m| \"test/functional/#{m[1]}_test.rb\" }","  # watch(%r{^app/helpers/(.*)\\.rb$})     { |m| \"test/helpers/#{m[1]}_test.rb\" }","  # watch(%r{^app/models/(.*)\\.rb$})      { |m| \"test/unit/#{m[1]}_test.rb\" }","end","","guard 'rspec' do","  watch(%r{^spec/.+_spec\\.rb$})","  watch(%r{^lib/(.+)\\.rb$})     { |m| \"spec/lib/#{m[1]}_spec.rb\" }","  watch('spec/spec_helper.rb')  { \"spec\" }","","  # Rails example","  watch(%r{^app/(.+)\\.rb$})                           { |m| \"spec/#{m[1]}_spec.rb\" }","  watch(%r{^app/(.*)(\\.erb|\\.haml)$})                 { |m| \"spec/#{m[1]}#{m[2]}_spec.rb\" }","  watch(%r{^app/controllers/(.+)_(controller)\\.rb$})  { |m| [\"spec/routing/#{m[1]}_routing_spec.rb\", \"spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb\", \"spec/acceptance/#{m[1]}_spec.rb\"] }","  watch(%r{^spec/support/(.+)\\.rb$})                  { \"spec\" }","  watch('config/routes.rb')                           { \"spec/routing\" }","  watch('app/controllers/application_controller.rb')  { \"spec/controllers\" }","","  # Capybara features specs","  watch(%r{^app/views/(.+)/.*\\.(erb|haml)$})          { |m| \"spec/features/#{m[1]}_spec.rb\" }","","  # Turnip features and steps","  watch(%r{^spec/acceptance/(.+)\\.feature$})","  watch(%r{^spec/acceptance/steps/(.+)_steps\\.rb$})   { |m| Dir[File.join(\"**/#{m[1]}.feature\")][0] || 'spec/acceptance' }","end","","","guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do","  watch('config/application.rb')","  watch('config/environment.rb')","  watch('config/environments/test.rb')","  watch(%r{^config/initializers/.+\\.rb$})","  watch('Gemfile')","  watch('Gemfile.lock')","  watch('spec/spec_helper.rb') { :rspec }","  watch('test/test_helper.rb') { :test_unit }","  watch(%r{features/support/}) { :cucumber }","end"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":39}},"text":"# Defines the matching rules for Guard."},{"action":"insertText","range":{"start":{"row":0,"column":39},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":54,"column":0}},"lines":["guard :minitest, spring: true, all_on_start: false do","  watch(%r{^test/(.*)/?(.*)_test\\.rb$})","  watch('test/test_helper.rb') { 'test' }","  watch('config/routes.rb')    { integration_tests }","  watch(%r{^app/models/(.*?)\\.rb$}) do |matches|","    \"test/models/#{matches[1]}_test.rb\"","  end","  watch(%r{^app/controllers/(.*?)_controller\\.rb$}) do |matches|","    resource_tests(matches[1])","  end","  watch(%r{^app/views/([^/]*?)/.*\\.html\\.erb$}) do |matches|","    [\"test/controllers/#{matches[1]}_controller_test.rb\"] +","    integration_tests(matches[1])","  end","  watch(%r{^app/helpers/(.*?)_helper\\.rb$}) do |matches|","    integration_tests(matches[1])","  end","  watch('app/views/layouts/application.html.erb') do","    'test/integration/site_layout_test.rb'","  end","  watch('app/helpers/sessions_helper.rb') do","    integration_tests << 'test/helpers/sessions_helper_test.rb'","  end","  watch('app/controllers/sessions_controller.rb') do","    ['test/controllers/sessions_controller_test.rb',","     'test/integration/users_login_test.rb']","  end","  watch('app/models/micropost.rb') do","    ['test/models/micropost_test.rb', 'test/models/user_test.rb']","  end","  watch(%r{app/views/users/*}) do","    resource_tests('users') +","    ['test/integration/microposts_interface_test.rb']","  end","end","","# Returns the integration tests corresponding to the given resource.","def integration_tests(resource = :all)","  if resource == :all","    Dir[\"test/integration/*\"]","  else","    Dir[\"test/integration/#{resource}_*.rb\"]","  end","end","","# Returns the controller tests corresponding to the given resource.","def controller_test(resource)","  \"test/controllers/#{resource}_controller_test.rb\"","end","","# Returns all tests for the given resource.","def resource_tests(resource)","  integration_tests(resource) << controller_test(resource)"]},{"action":"insertText","range":{"start":{"row":54,"column":0},"end":{"row":54,"column":3}},"text":"end"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":54,"column":3},"end":{"row":54,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1414254183865,"hash":"350b84316fcd050ed52bebda79d4618923630477"}